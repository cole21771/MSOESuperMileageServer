<!doctype html>

<link rel="stylesheet" href="hoverDetail.css">
<script src="node_modules/d3/d3.min.js"></script>
<script src="node_modules/rickshaw/rickshaw.min.js"></script>

<div id="chart"></div>

<script>

    let data = [ { x: 0, y: 40 }, { x: 1, y: 49 }, { x: 2, y: 17 }, { x: 3, y: 42 } ];

    let graph = new Rickshaw.Graph( {
        element: document.getElementById("chart"),
        renderer: 'area',
        stroke: true,
        interpolation: 'linear',
        series: [ {
            color: 'gray',
            name: 'Label',
            data: data
        }],
        min: 0,
        max: 100
    } );
    new Rickshaw.Graph.HoverDetail({
        graph: graph,
        yFormatter: (y) => { return y.toFixed(2) + ' units'; }
    });
    new Rickshaw.Graph.Axis.Time({graph: graph});
    new Rickshaw.Graph.Axis.Y({graph: graph});

    let x = 4;
    function addData() {


        data.push({x: x++, y: Math.random() * 100});

        if(data.length >= 50)
            data.shift();

        graph.render();
    }

    setInterval(addData, 250);
</script>